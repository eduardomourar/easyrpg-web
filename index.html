<!doctypehtml><html lang=en><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1"name=viewport><title>EasyRPG Player</title><style>:root{--color-gray:hsl(0, 0%, 55%);--controls-size:10vh}@media (orientation:landscape){:root{--controls-size:20vh}}html{touch-action:none}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif,"Apple Color Emoji","Segoe UI Emoji";margin:0;color:#fff;background:#000}.unselectable{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}#status{font-size:1.5rem;color:var(--color-gray);text-align:center}#controls{position:relative;text-align:right;z-index:10}#controls button{-webkit-appearance:button;display:inline-flex;background:0 0;border:0;color:#fff;font-family:inherit;font-size:1em;line-height:inherit;cursor:pointer;padding:.5rem}#controls svg{pointer-events:none}#canvas{position:absolute;top:50%;left:50%;width:320px;height:240px;border:0;image-rendering:pixelated;image-rendering:crisp-edges;transform:translate(-50%,-50%)}#apad,#dpad{position:fixed;bottom:1rem}#dpad{left:1rem}#apad{right:1rem}#dpad svg{width:calc(2 * var(--controls-size));height:calc(2 * var(--controls-size));fill:var(--color-gray)}#dpad svg rect{opacity:.4}#apad>*{width:var(--controls-size);height:var(--controls-size);background-color:var(--color-gray);border-radius:50%}#apad>:last-child{position:relative;right:var(--controls-size)}#apad>:not(.active),#dpad path:not(.active){opacity:.4}@media (hover:hover) and (pointer:fine){#apad,#dpad{display:none}}@media (min-width:320px) and (min-height:240px){#canvas{width:320px;height:240px}}@media (min-width:640px) and (min-height:480px){#canvas{width:640px;height:480px}}@media (min-width:960px) and (min-height:720px){#canvas{width:960px;height:720px}}@media (min-width:1280px) and (min-height:720px){#canvas{width:1280px;height:720px}}@media (min-width:1600px) and (min-height:1200px){#canvas{width:1600px;height:1200px}}@media (min-width:1920px) and (min-height:1440px){#canvas{width:1920px;height:1440px}}@media (min-width:2240px) and (min-height:1680px){#canvas{width:2240px;height:1680px}}@media (min-width:2560px) and (min-height:1920px){#canvas{width:2560px;height:1920px}}@media (min-width:2880px) and (min-height:2160px){#canvas{width:2880px;height:2160px}}@media (min-width:3200px) and (min-height:2400px){#canvas{width:3200px;height:2400px}}@media (min-width:3520px) and (min-height:2640px){#canvas{width:3520px;height:2640px}}@media (min-width:3840px) and (min-height:2880px){#canvas{width:3840px;height:2880px}}@media (min-width:4160px) and (min-height:3120px){#canvas{width:4160px;height:3120px}}@media (min-width:4480px) and (min-height:3360px){#canvas{width:4480px;height:3360px}}@media (min-width:4800px) and (min-height:3600px){#canvas{width:4800px;height:3600px}}@media (min-width:5120px) and (min-height:3840px){#canvas{width:5120px;height:3840px}}@media (min-width:5440px) and (min-height:4080px){#canvas{width:5440px;height:4080px}}@media (min-width:5760px) and (min-height:4320px){#canvas{width:5760px;height:4320px}}</style></head><body><div id=controls><button class=unselectable id=controls-fullscreen><svg viewBox="0 0 15 15"xmlns=http://www.w3.org/2000/svg fill=none height=25 width=25><path d="M13.5 13.5H10m3.5 0V10m0 3.5l-4-4m.5-8h3.5m0 0V5m0-3.5l-4 4M5 1.5H1.5m0 0V5m0-3.5l4 4m-4 4.5v3.5m0 0H5m-3.5 0l4-4"stroke=currentColor></path></svg></button></div><div id=status></div><canvas class=unselectable id=canvas tabindex=-1></canvas><div id=dpad class=unselectable><svg viewBox="0 0 72 72"xmlns=http://www.w3.org/2000/svg><path d=M48,5.8C48,2.5,45.4,0,42,0H29.9C26.6,0,24,2.4,24,5.8V24h24V5.8z data-key=ArrowUp data-key-code=38 id=dpad-up /><path d=M66.2,24H48v24h18.2c3.3,0,5.8-2.7,5.8-6V29.9C72,26.5,69.5,24,66.2,24z data-key=ArrowRight data-key-code=39 id=dpad-right /><path d=M24,66.3c0,3.3,2.6,5.7,5.9,5.7H42c3.3,0,6-2.4,6-5.7V48H24V66.3z data-key=ArrowDown data-key-code=40 id=dpad-down /><path d=M5.7,24C2.4,24,0,26.5,0,29.9V42c0,3.3,2.3,6,5.7,6H24V24H5.7z data-key=ArrowLeft data-key-code=37 id=dpad-left /><rect height=24 id=dpad-center width=24 x=24 y=24 /></svg></div><div id=apad class=unselectable><div id=apad-escape data-key=Escape data-key-code=27></div><div id=apad-enter data-key=Enter data-key-code=13></div></div><script async src=index.js></script><script>const hasTouchscreen=window.matchMedia("(hover: none), (pointer: coarse)").matches,preventNativeKeys=["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"," ","F12"],keys=new Map,keysDown=new Map,canvas=document.getElementById("canvas");let lastTouchedId;function simulateKeyboardEvent(e,t,n){const s=new Event(e,{bubbles:!0});s.key=t,s.code=t,s.keyCode=n,s.which=n,canvas.dispatchEvent(s)}function simulateKeyboardInput(e,t){simulateKeyboardEvent("keydown",e,t),window.setTimeout(()=>{simulateKeyboardEvent("keyup",e,t)},100)}function bindKey(e,t,n){keys.set(e.id,{key:t,keyCode:n}),e.addEventListener("touchstart",s=>{s.preventDefault(),simulateKeyboardEvent("keydown",t,n),keysDown.set(s.target.id,e.id),e.classList.add("active")}),e.addEventListener("touchend",t=>{t.preventDefault();const n=keysDown.get(t.target.id);if(n&&keys.has(n)){const{key:e,keyCode:t}=keys.get(n);simulateKeyboardEvent("keyup",e,t)}keysDown.delete(t.target.id),e.classList.remove("active"),lastTouchedId&&document.getElementById(lastTouchedId).classList.remove("active")}),e.addEventListener("touchmove",e=>{const{target:t,clientX:n,clientY:s}=e.changedTouches[0],a=keysDown.get(t.id),o=document.elementFromPoint(n,s).id;if(a!==o){if(a){const{key:e,keyCode:n}=keys.get(a);simulateKeyboardEvent("keyup",e,n),keysDown.delete(t.id),document.getElementById(a).classList.remove("active")}if(keys.has(o)){const{key:e,keyCode:n}=keys.get(o);simulateKeyboardEvent("keydown",e,n),keysDown.set(t.id,o),lastTouchedId=o,document.getElementById(o).classList.add("active")}}})}if(canvas.addEventListener("mouseenter",()=>window.focus()),canvas.addEventListener("click",()=>window.focus()),document.querySelector("#controls-fullscreen").addEventListener("click",()=>{canvas.requestFullscreen&&canvas.requestFullscreen()}),hasTouchscreen)for(const e of document.querySelectorAll("[data-key]"))bindKey(e,e.dataset.key,e.dataset.keyCode);else window.addEventListener("keydown",e=>{preventNativeKeys.includes(e.key)&&e.preventDefault()}),canvas.addEventListener("contextmenu",e=>{e.preventDefault()})</script></body></html>